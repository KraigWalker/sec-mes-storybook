(this["webpackJsonpsecure-messages-webapp"]=this["webpackJsonpsecure-messages-webapp"]||[]).push([[4],{478:function(e,t,n){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,s="millisecond",r="second",i="minute",a="hour",c="day",o="week",u="month",l="quarter",d="year",h="date",f="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,j={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},_=function(e,t,n){var s=String(e);return!s||s.length>=t?e:""+Array(t+1-s.length).join(n)+e},g={s:_,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),s=Math.floor(n/60),r=n%60;return(t<=0?"+":"-")+_(s,2,"0")+":"+_(r,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var s=12*(n.year()-t.year())+(n.month()-t.month()),r=t.clone().add(s,u),i=n-r<0,a=t.clone().add(s+(i?-1:1),u);return+(-(s+(n-r)/(i?r-a:a-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:d,w:o,d:c,D:h,h:a,m:i,s:r,ms:s,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},p="en",v={};v[p]=j;var x=function(e){return e instanceof S},O=function(e,t,n){var s;if(!e)return p;if("string"==typeof e)v[e]&&(s=e),t&&(v[e]=t,s=e);else{var r=e.name;v[r]=e,s=r}return!n&&s&&(p=s),s||!n&&p},$=function(e,t){if(x(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new S(n)},y=g;y.l=O,y.i=x,y.w=function(e,t){return $(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var S=function(){function j(e){this.$L=O(e.locale,null,!0),this.parse(e)}var _=j.prototype;return _.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(y.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var s=t.match(m);if(s){var r=s[2]-1||0,i=(s[7]||"0").substring(0,3);return n?new Date(Date.UTC(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,i)):new Date(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,i)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},_.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},_.$utils=function(){return y},_.isValid=function(){return!(this.$d.toString()===f)},_.isSame=function(e,t){var n=$(e);return this.startOf(t)<=n&&n<=this.endOf(t)},_.isAfter=function(e,t){return $(e)<this.startOf(t)},_.isBefore=function(e,t){return this.endOf(t)<$(e)},_.$g=function(e,t,n){return y.u(e)?this[t]:this.set(n,e)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(e,t){var n=this,s=!!y.u(t)||t,l=y.p(e),f=function(e,t){var r=y.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return s?r:r.endOf(c)},m=function(e,t){return y.w(n.toDate()[e].apply(n.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},b=this.$W,j=this.$M,_=this.$D,g="set"+(this.$u?"UTC":"");switch(l){case d:return s?f(1,0):f(31,11);case u:return s?f(1,j):f(0,j+1);case o:var p=this.$locale().weekStart||0,v=(b<p?b+7:b)-p;return f(s?_-v:_+(6-v),j);case c:case h:return m(g+"Hours",0);case a:return m(g+"Minutes",1);case i:return m(g+"Seconds",2);case r:return m(g+"Milliseconds",3);default:return this.clone()}},_.endOf=function(e){return this.startOf(e,!1)},_.$set=function(e,t){var n,o=y.p(e),l="set"+(this.$u?"UTC":""),f=(n={},n[c]=l+"Date",n[h]=l+"Date",n[u]=l+"Month",n[d]=l+"FullYear",n[a]=l+"Hours",n[i]=l+"Minutes",n[r]=l+"Seconds",n[s]=l+"Milliseconds",n)[o],m=o===c?this.$D+(t-this.$W):t;if(o===u||o===d){var b=this.clone().set(h,1);b.$d[f](m),b.init(),this.$d=b.set(h,Math.min(this.$D,b.daysInMonth())).$d}else f&&this.$d[f](m);return this.init(),this},_.set=function(e,t){return this.clone().$set(e,t)},_.get=function(e){return this[y.p(e)]()},_.add=function(s,l){var h,f=this;s=Number(s);var m=y.p(l),b=function(e){var t=$(f);return y.w(t.date(t.date()+Math.round(e*s)),f)};if(m===u)return this.set(u,this.$M+s);if(m===d)return this.set(d,this.$y+s);if(m===c)return b(1);if(m===o)return b(7);var j=(h={},h[i]=t,h[a]=n,h[r]=e,h)[m]||1,_=this.$d.getTime()+s*j;return y.w(_,this)},_.subtract=function(e,t){return this.add(-1*e,t)},_.format=function(e){var t=this;if(!this.isValid())return f;var n=e||"YYYY-MM-DDTHH:mm:ssZ",s=y.z(this),r=this.$locale(),i=this.$H,a=this.$m,c=this.$M,o=r.weekdays,u=r.months,l=function(e,s,r,i){return e&&(e[s]||e(t,n))||r[s].substr(0,i)},d=function(e){return y.s(i%12||12,e,"0")},h=r.meridiem||function(e,t,n){var s=e<12?"AM":"PM";return n?s.toLowerCase():s},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:c+1,MM:y.s(c+1,2,"0"),MMM:l(r.monthsShort,c,u,3),MMMM:l(u,c),D:this.$D,DD:y.s(this.$D,2,"0"),d:String(this.$W),dd:l(r.weekdaysMin,this.$W,o,2),ddd:l(r.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(i),HH:y.s(i,2,"0"),h:d(1),hh:d(2),a:h(i,a,!0),A:h(i,a,!1),m:String(a),mm:y.s(a,2,"0"),s:String(this.$s),ss:y.s(this.$s,2,"0"),SSS:y.s(this.$ms,3,"0"),Z:s};return n.replace(b,(function(e,t){return t||m[e]||s.replace(":","")}))},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(s,h,f){var m,b=y.p(h),j=$(s),_=(j.utcOffset()-this.utcOffset())*t,g=this-j,p=y.m(this,j);return p=(m={},m[d]=p/12,m[u]=p,m[l]=p/3,m[o]=(g-_)/6048e5,m[c]=(g-_)/864e5,m[a]=g/n,m[i]=g/t,m[r]=g/e,m)[b]||g,f?p:y.a(p)},_.daysInMonth=function(){return this.endOf(u).$D},_.$locale=function(){return v[this.$L]},_.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),s=O(e,t,!0);return s&&(n.$L=s),n},_.clone=function(){return y.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},j}(),M=S.prototype;return $.prototype=M,[["$ms",s],["$s",r],["$m",i],["$H",a],["$W",c],["$M",u],["$y",d],["$D",h]].forEach((function(e){M[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),$.extend=function(e,t){return e.$i||(e(t,S,$),e.$i=!0),$},$.locale=O,$.isDayjs=x,$.unix=function(e){return $(1e3*e)},$.en=v[p],$.Ls=v,$.p={},$}()},648:function(e,t,n){e.exports={segment:"Segment_segment__3ATOs",link:"Segment_link__3GJAF",current:"Segment_current__27GOg",visuallyHidden:"Segment_visuallyHidden__ptxAn"}},649:function(e,t,n){e.exports={imposterSegment:"ImposterSegment_imposterSegment__2FqLz",label:"ImposterSegment_label__3VJ9L"}},650:function(e,t,n){e.exports={borderWrapper:"SegmentedControl_borderWrapper__1RaU5",segmentedControl:"SegmentedControl_segmentedControl__DlosJ",listContainer:"SegmentedControl_listContainer__1c8Fo",stepper:"SegmentedControl_stepper__2lVFg",imposterListContainer:"SegmentedControl_imposterListContainer__Mx9_F",imposterList:"SegmentedControl_imposterList__2gnI9",list:"SegmentedControl_list__owtKB"}},651:function(e,t,n){e.exports={messageListItem:"MessageListItem_messageListItem__2i2Vd",headingContainer:"MessageListItem_headingContainer__14SwH",title:"MessageListItem_title__Wl72Z",linkContainer:"MessageListItem_linkContainer__1g5Aq",visuallyHidden:"MessageListItem_visuallyHidden__2qHnP",detailHeading:"MessageListItem_detailHeading__Yga00"}},652:function(e,t,n){e.exports={messageList:"MessageList_messageList__3x_7Z",endText:"MessageList_endText__28ahi"}},653:function(e,t,n){e.exports={button:"FloatingActionButton_button__24EZK",iconWrapper:"FloatingActionButton_iconWrapper__2TN2l",icon:"FloatingActionButton_icon__3KZOX",label:"FloatingActionButton_label__1Zvf7"}},654:function(e,t,n){e.exports={scrollContainer:"SecureMessageListView_scrollContainer__1I6D-",main:"SecureMessageListView_main__2KLt1",container:"SecureMessageListView_container__1gayH",wrapper:"SecureMessageListView_wrapper__DsuP1",buttonPositioner:"SecureMessageListView_buttonPositioner__3khF2",navContainer:"SecureMessageListView_navContainer__1qMpg",navPositioner:"SecureMessageListView_navPositioner__1Fj8Z",enter:"SecureMessageListView_enter__1Vkja",enterActive:"SecureMessageListView_enterActive__2882p",enterDone:"SecureMessageListView_enterDone__344km",exit:"SecureMessageListView_exit__fsqnF",exitActive:"SecureMessageListView_exitActive__2Jp-J",exitDone:"SecureMessageListView_exitDone__1Bdtc"}},658:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return P}));var s=n(16),r=n(106),i=n(648),a=n.n(i),c=n(18);function o(e){var t=e.label,n=e.to,s=e.isCurrent,i=void 0!==s&&s;return Object(c.jsx)("li",{className:a.a.segment,children:i?Object(c.jsxs)("span",{className:"".concat(a.a.current," ").concat(a.a.link),children:[Object(c.jsx)("span",{className:a.a.visuallyHidden,children:"Current Page: "}),Object(c.jsx)("span",{children:t})]}):Object(c.jsx)(r.b,{className:a.a.link,to:n,children:t})})}var u=n(649),l=n.n(u);function d(e){var t=e.label;return Object(c.jsx)("div",{className:l.a.imposterSegment,children:Object(c.jsx)("span",{className:l.a.label,"aria-hidden":"true",children:t})})}var h=n(650),f=n.n(h),m="Inbox",b="Sent",j="Drafts",_="Archives",g="/secure-messages";function p(e){return"calc(".concat(e,"00% + 0px)")}function v(e){switch(e){default:case g:return 0;case"".concat(g,"/sent"):return p(1);case"".concat(g,"/drafts"):return p(2);case"".concat(g,"/archive"):return p(3)}}function x(e){switch(e){default:case"/":return 0;case"".concat(g,"/sent"):return"calc(-25% + 0px)";case"".concat(g,"/drafts"):return"calc(-50% + 0px)";case"".concat(g,"/archive"):return"calc(-75% + 0px)"}}function O(){var e=Object(s.h)().pathname;return console.log(e),Object(c.jsx)("div",{className:f.a.borderWrapper,children:Object(c.jsx)("nav",{className:f.a.segmentedControl,children:Object(c.jsxs)("div",{className:f.a.listContainer,children:[Object(c.jsx)("div",{className:f.a.imposterListContainer,tabIndex:"-1",children:Object(c.jsx)("div",{"aria-hidden":"true",className:f.a.stepper,style:{transform:"translateX("+v(e)+")"},children:Object(c.jsxs)("div",{className:f.a.imposterList,style:{transform:"translateX("+x(e)+")"},children:[Object(c.jsx)(d,{label:m}),Object(c.jsx)(d,{label:b}),Object(c.jsx)(d,{label:j}),Object(c.jsx)(d,{label:_})]})})}),Object(c.jsxs)("ul",{className:f.a.list,children:[Object(c.jsx)(o,{label:m,to:g,isCurrent:e===g}),Object(c.jsx)(o,{label:b,to:"".concat(g,"/sent"),isCurrent:e==="".concat(g,"/sent")}),Object(c.jsx)(o,{label:j,to:"".concat(g,"/drafts"),isCurrent:e==="".concat(g,"/drafts")}),Object(c.jsx)(o,{label:_,to:"".concat(g,"/archive"),isCurrent:e==="".concat(g,"/archive")})]})]})})})}var $=n(19);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],s=!0,r=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(s=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);s=!0);}catch(o){r=!0,i=o}finally{try{s||null==c.return||c.return()}finally{if(r)throw i}}return n}}(e,t)||function(e,t){if(e){if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var M=n(478),w=n.n(M),C=n(651),D=n.n(C);function N(e,t){for(var n=Math.ceil(e.length/t),s=new Array(n),r=0,i=0;r<n;++r,i+=t)s[r]=e.substr(i,t);return s}function L(e){var t=e.id,n=e.subject,s=e.account,i=e.dateCreated,a=(e.isUnread,S(function(e){return e.metadata&&e.metadata.display_name&&"string"===typeof e.metadata.display_name?[e.metadata.display_name,!0]:e.product&&e.product.name&&"string"===typeof e.product.name?[e.product.name,!0]:["",!1]}(s),2)),o=a[0],u=a[1];return Object(c.jsx)("li",{className:D.a.messageListItem,children:Object(c.jsxs)(r.b,{to:"/secure-messages/view/".concat(t),className:D.a.linkContainer,children:[Object(c.jsxs)("div",{className:D.a.headingContainer,children:[Object(c.jsxs)("h3",{className:D.a.title,children:[Object(c.jsx)("i",{className:D.a.unreadMarker}),n]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{className:D.a.visuallyHidden,children:"Recieved: "}),Object(c.jsx)("time",{className:D.a.time,children:w()(i).format("DD/MM/YYYY")}),Object(c.jsx)("span",{className:D.a.chevron})]})]}),Object(c.jsxs)("dl",{className:D.a.detailsContainer,children:[u&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("dd",{className:D.a.detailHeading,children:"Account Name"}),Object(c.jsx)("dt",{className:D.a.detailValue,children:o})]}),Object(c.jsx)("dd",{className:D.a.detailHeading,children:"Sortcode and Account Number"}),Object(c.jsx)("dt",{className:D.a.detailValue,children:s&&s.number?"".concat(N(s.number.split("-")[0],6).join("-")," | ").concat(s.number.split("-")[1]):Object(c.jsx)("br",{})})]})]})})}var A=n(102),I=n(104),k=n(652),F=n.n(k);function H(e){var t=e.statusFilter,n=void 0===t?"Inbox":t,s=Object($.e)((function(e){return e.auth.accessToken})),r=Object($.e)((function(e){return e.session.bankId})),i=null==s||"string"!==typeof r,a=Object(I.b)(void 0,{skip:i}),o=a.data,u=void 0===o?[]:o,l=a.isLoadingAccounts,d=a.isFetchingAccounts,h=Object(A.b)(void 0,{skip:i}),f=h.data,m=void 0===f?[]:f,b=h.isLoading,j=h.isFetching;console.dir(u);var _=m.filter((function(e){return"Inbox"===n?"NEW"===e.status||"READ"===e.status:e.status===n}));return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("ol",{className:F.a.messageList,children:!b&&!j&&!l&&!d&&_.map((function(e,t){var n=e.id,s=e.subject,r=e.date_created,i=e.account;return Object(c.jsx)(L,{id:n,subject:s,account:i&&u.find((function(e){return e.id===i.id}))||{},dateCreated:r},"message_item_".concat(n||"_no_id_".concat(t),"'}"))}))}),Object(c.jsx)("p",{className:F.a.endText,children:_.length>0?"That's everything.":"Nothing to see here."})]})}var V=n(653),T=n.n(V);function Y(e){var t=e.label,n=e.labelId,s=e.onClick;return Object(c.jsxs)("button",{type:"button",className:T.a.button,"aria-labelledby":n,onClick:s,children:[Object(c.jsx)("span",{className:T.a.iconWrapper,children:Object(c.jsxs)("svg",{className:T.a.icon,height:"100%",width:"100%",viewBox:"0 0 96 96",xmlns:"http://www.w3.org/2000/svg",children:[Object(c.jsx)("path",{fill:"#fff",d:"m76.423744 1.1549952 4.00128 2.823744c2.8355974 2.00515517 3.5133075 5.92707549 1.5150336 8.7675264l-4.24128 6.0112512-6.2775168-4.425024 3.4424832-4.8787584-1.7399808-1.2262272-4.0537728 5.7449856 5.8762752 4.1475072c2.8364681 2.0042152 3.515806 5.9259959 1.51872 8.767488l-32.647488 44.505024-6.1949952-4.545024 31.7438976-43.2675072-6.8588928-4.8374784c-.6414715-.4546528-1.145792-1.0310457-1.503666-1.6756821-.074633 1.382025-.5386868 2.726748-1.3536396 3.8731605l-36.5366016 50.20128-1.1887488 11.1562368 9.6299904-5.6775168-4.9237632-3.5774976 4.5151872-6.2099712 11.0587392 8.0324736-5.60256 7.9237632-15.2512128 8.6587392c-.7451619.4877081-1.6182132.7434951-2.5087488.7352187-1.0692373-.0032254-2.111554-.3357627-2.9849856-.9525243-1.6118148-1.1255201-2.420349-3.0867997-2.0699904-5.0212224l1.9087488-17.92512 17.8050048-24.4612608c-.6846654.3783638-1.3951791.7079377-2.1262464.9862656l-1.8787584.7124736-2.7300096-7.1775744 1.8825216-.7162368c2.4132233-.904042 4.2734854-2.872188 5.040192-5.3324928l4.4062464-11.8912512c1.9167663-5.2585137 6.0528161-9.4055486 11.3062272-11.336256 2.9599351-.91209416 6.1791112-.31061007 8.6100096 1.6087296 1.0827626.7873884 1.9172673 1.8516916 2.4259686 3.0668481.1197082-.7178348.3986972-1.4212595.8438298-2.0579649l6.3675264-9.0226176c.9632329-1.36418015 2.4292088-2.2895452 4.0750691-2.57229768s3.336617.10029801 4.6999069 1.06479048zm-24.179904 15.1837262c-.2515881.0053843-.5013179.0444918-.7425024.116293-2.8763878 1.2794235-5.1143038 3.6660806-6.2062464 6.6187392l-3.4349952 9.2662656 11.3887488-15.648768c-.2844149-.2297257-.6394057-.354241-1.0050048-.3525298z"}),Object(c.jsx)("mask",{children:Object(c.jsx)("path",{d:"m0 0h96v96h-96z"})})]})}),t&&Object(c.jsx)("span",{id:n,className:T.a.label,children:"".concat(t)})]})}var W=n(654),J=n.n(W);function P(){var e=Object(s.j)("/secure-messages").url,t=Object(s.h)(),n=Object(s.g)();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:J.a.buttonPositioner,children:Object(c.jsx)(Y,{label:"Compose",labelId:"actionButton",onClick:function(){n.push("/secure-messages/new")}})}),Object(c.jsxs)("div",{className:J.a.scrollContainer,children:[Object(c.jsx)("div",{className:J.a.navContainer,children:Object(c.jsx)("div",{className:J.a.navPositioner,children:Object(c.jsx)(O,{})})}),Object(c.jsx)("main",{id:"main",className:J.a.main,children:Object(c.jsxs)(s.d,{location:t,children:[Object(c.jsx)(s.b,{exact:!0,strict:!0,path:e,children:Object(c.jsx)(H,{})}),Object(c.jsx)(s.b,{exact:!0,strict:!0,path:"".concat(e,"/sent"),children:Object(c.jsx)(H,{statusFilter:"SENT"})}),Object(c.jsx)(s.b,{exact:!0,strict:!0,path:"".concat(e,"/drafts"),children:Object(c.jsx)(H,{statusFilter:"DRAFT"})}),Object(c.jsx)(s.b,{exact:!0,strict:!0,path:"".concat(e,"/archive"),children:Object(c.jsx)(H,{statusFilter:"ARCHIVED"})})]})})]})]})}}}]);
//# sourceMappingURL=4.9393bb56.chunk.js.map